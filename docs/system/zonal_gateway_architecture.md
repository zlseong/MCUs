# Zonal Gateway Architecture

ê³„ì¸µì  ì°¨ëŸ‰ ë„¤íŠ¸ì›Œí¬ ì•„í‚¤í…ì²˜: CCU (VMG) â†’ Zonal Gateway â†’ ECU

## ğŸ“Š ì „ì²´ êµ¬ì¡°

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Cloud Server       â”‚
                    â”‚   (OTA Management)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚ MQTT/HTTPS (TCP)
                               â”‚ í¬íŠ¸ 8883/443
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   VMG (CCU)          â”‚
                    â”‚   Central Gateway    â”‚
                    â”‚   192.168.1.1        â”‚
                    â”‚                      â”‚
                    â”‚ - DoIP Server:13400  â”‚
                    â”‚ - JSON Server:8765   â”‚
                    â”‚ - ì—¬ëŸ¬ Zone í†µí•©     â”‚
                    â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”˜
                       â”‚        â”‚        â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ DoIP/JSON           â”‚ DoIP/JSON           â”‚ DoIP/JSON
          â”‚ (In-Vehicle)        â”‚ (In-Vehicle)        â”‚ (In-Vehicle)
          â”‚                     â”‚                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MCU #1 (ZG)        â”‚ â”‚ MCU #3 (ZG)      â”‚ â”‚ MCU #5 (ZG)      â”‚
â”‚ Zonal Gateway      â”‚ â”‚ Zonal Gateway    â”‚ â”‚ Zonal Gateway    â”‚
â”‚ Zone 1: Powertrain â”‚ â”‚ Zone 2: Chassis  â”‚ â”‚ Zone 3: Body     â”‚
â”‚ 192.168.1.10       â”‚ â”‚ 192.168.1.20     â”‚ â”‚ 192.168.1.30     â”‚
â”‚                    â”‚ â”‚                  â”‚ â”‚                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ DoIP Server    â”‚ â”‚ â”‚ â”‚ DoIP Server  â”‚ â”‚ â”‚ â”‚ DoIP Server  â”‚ â”‚
â”‚ â”‚ (Zone ECUìš©)   â”‚ â”‚ â”‚ â”‚ (Zone ECUìš©) â”‚ â”‚ â”‚ â”‚ (Zone ECUìš©) â”‚ â”‚
â”‚ â”‚ Port: 13400    â”‚ â”‚ â”‚ â”‚ Port: 13400  â”‚ â”‚ â”‚ â”‚ Port: 13400  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ DoIP Client    â”‚ â”‚ â”‚ â”‚ DoIP Client  â”‚ â”‚ â”‚ â”‚ DoIP Client  â”‚ â”‚
â”‚ â”‚ (VMG ì—°ê²°ìš©)   â”‚ â”‚ â”‚ â”‚ (VMG ì—°ê²°ìš©) â”‚ â”‚ â”‚ â”‚ (VMG ì—°ê²°ìš©) â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
      â”‚      â”‚                â”‚      â”‚             â”‚      â”‚
      â”‚      â”‚ DoIP           â”‚      â”‚ DoIP        â”‚      â”‚ DoIP
      â”‚      â”‚ (Zone Net)     â”‚      â”‚ (Zone Net)  â”‚      â”‚ (Zone Net)
      â”‚      â”‚                â”‚      â”‚             â”‚      â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â” â”Œâ”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â” â”Œâ”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â” â”Œâ”€â–¼â”€â”€â”€â”€â”
â”‚ MCU #2 â”‚ â”‚MCU #4â”‚    â”‚ MCU #6 â”‚ â”‚MCU #8â”‚  â”‚MCU #10 â”‚ â”‚MCU #12â”‚
â”‚ (ECU)  â”‚ â”‚(ECU) â”‚    â”‚ (ECU)  â”‚ â”‚(ECU) â”‚  â”‚ (ECU)  â”‚ â”‚(ECU)  â”‚
â”‚Engine  â”‚ â”‚Trans â”‚    â”‚ABS/ESC â”‚ â”‚Steer â”‚  â”‚BCM     â”‚ â”‚Door  â”‚
â”‚        â”‚ â”‚      â”‚    â”‚        â”‚ â”‚      â”‚  â”‚        â”‚ â”‚      â”‚
â”‚DoIP    â”‚ â”‚DoIP  â”‚    â”‚DoIP    â”‚ â”‚DoIP  â”‚  â”‚DoIP    â”‚ â”‚DoIP  â”‚
â”‚Client  â”‚ â”‚Clientâ”‚    â”‚Client  â”‚ â”‚Clientâ”‚  â”‚Client  â”‚ â”‚Clientâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Zonal Gateway (MCU #1) ì—­í• 

### ì´ì¤‘ ì—­í•  (Dual Role)

#### 1. **Server ì—­í• ** (Downstream - Zone ë‚´ë¶€)
```c
/* Zone ë‚´ ECUë“¤ì—ê²Œ ì„œë²„ */
- DoIP Server (í¬íŠ¸ 13400, TCP/UDP)
- JSON Server (í¬íŠ¸ 8765, TCP)
- Vehicle Discovery (UDP Broadcast ì‘ë‹µ)
- UDS ìš”ì²­ ì²˜ë¦¬
- Zone ë‚´ ECU ê´€ë¦¬
```

#### 2. **Client ì—­í• ** (Upstream - VMG ì—°ê²°)
```c
/* VMG(CCU)ì—ê²Œ í´ë¼ì´ì–¸íŠ¸ */
- DoIP Client (VMG í¬íŠ¸ 13400 ì—°ê²°)
- Zone VCI ì§‘ê³„ ë° ì „ì†¡
- Heartbeat ì „ì†¡
- OTA ì¡°ìœ¨ ë° ì¤‘ê³„
```

---

## ğŸ“¡ í†µì‹  í”„ë¡œí† ì½œ

### Zonal Gateway â†” Zone ECU (Downstream)

| í”„ë¡œí† ì½œ | í¬íŠ¸ | ë°©í–¥ | ìš©ë„ |
|---------|------|------|------|
| **UDP** | 13400 | ECU â†’ ZG (Broadcast) | Vehicle Discovery |
| **UDP** | 13400 | ZG â†’ ECU (Unicast) | Discovery Response |
| **TCP (DoIP)** | 13400 | ECU â†” ZG | ì§„ë‹¨ í†µì‹  (UDS) |
| **TCP (JSON)** | 8765 | ECU â†’ ZG | ì œì–´ ë©”ì‹œì§€ |

### Zonal Gateway â†” VMG (Upstream)

| í”„ë¡œí† ì½œ | í¬íŠ¸ | ë°©í–¥ | ìš©ë„ |
|---------|------|------|------|
| **TCP (DoIP)** | 13400 | ZG â†’ VMG | Zone VCI, Status |
| **TCP (DoIP)** | 13400 | VMG â†’ ZG | OTA Commands |
| **TCP (JSON)** | 8765 | ZG â†” VMG | JSON ë©”ì‹œì§€ |

### VMG â†” Server (Cloud)

| í”„ë¡œí† ì½œ | í¬íŠ¸ | ë°©í–¥ | ìš©ë„ |
|---------|------|------|------|
| **MQTT/TCP** | 8883 | VMG â†” Server | Wake up, VCI, Status |
| **HTTPS/TCP** | 443 | VMG â† Server | OTA íŒŒì¼ ë‹¤ìš´ë¡œë“œ |

---

## ğŸ”„ ë©”ì‹œì§€ íë¦„ ì‹œë‚˜ë¦¬ì˜¤

### 1. ì‹œë™ ë° Discovery

```
MCU #2 (ECU)        MCU #1 (ZG)         VMG (CCU)          Server
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚â—„â”€â”€System Bootâ”€â”€â”€â”€â”€â”¤                   â”‚                  â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚â”€â”€UDP Broadcastâ”€â”€â”€â–ºâ”‚                   â”‚                  â”‚
    â”‚ "ZG ì°¾ê¸°"          â”‚                   â”‚                  â”‚
    â”‚ 255.255.255:13400  â”‚                   â”‚                  â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚â—„â”€â”€UDP Responseâ”€â”€â”€â”€â”¤                   â”‚                  â”‚
    â”‚ VIN: KMHGH...     â”‚                   â”‚                  â”‚
    â”‚ Address: 0x0201   â”‚                   â”‚                  â”‚
    â”‚ ZG IP: 192.168.1.10                   â”‚                  â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚â”€â”€TCP Connectâ”€â”€â”€â”€â”€â–ºâ”‚                   â”‚                  â”‚
    â”‚ DoIP: 192.168.1.10:13400              â”‚                  â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚â”€â”€Routing Act Reqâ”€â–ºâ”‚                   â”‚                  â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚â—„â”€â”€Routing Act Resâ”€â”¤                   â”‚                  â”‚
    â”‚ (Success)         â”‚                   â”‚                  â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚                   â”‚â”€â”€TCP Connectâ”€â”€â”€â”€â”€â–ºâ”‚                  â”‚
    â”‚                   â”‚ DoIP: 192.168.1.1:13400              â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚                   â”‚â”€â”€Routing Act Reqâ”€â–ºâ”‚                  â”‚
    â”‚                   â”‚â—„â”€â”€Routing Act Resâ”€â”¤                  â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚                   â”‚                   â”‚â”€â”€MQTT Connectâ”€â”€â”€â–ºâ”‚
    â”‚                   â”‚                   â”‚ (Wake Up)         â”‚
    â”‚                   â”‚                   â”‚â—„â”€â”€ACKâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
```

### 2. VCI ìˆ˜ì§‘

```
MCU #2 (ECU)        MCU #1 (ZG)         VMG (CCU)          Server
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚                   â”‚                   â”‚â—„â”€â”€REQUEST_VCIâ”€â”€â”€â”€â”¤
    â”‚                   â”‚                   â”‚ MQTT             â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚                   â”‚â—„â”€â”€Collect VCIâ”€â”€â”€â”€â”€â”¤                  â”‚
    â”‚                   â”‚ "Zone 1 VCI ìˆ˜ì§‘"  â”‚                  â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚â—„â”€â”€UDS: Read DIDâ”€â”€â”€â”¤                   â”‚                  â”‚
    â”‚ 0x22 F190 (VIN)   â”‚                   â”‚                  â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚â”€â”€UDS: Res VINâ”€â”€â”€â”€â–ºâ”‚                   â”‚                  â”‚
    â”‚ KMHGH4JH1NU123456 â”‚                   â”‚                  â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚â—„â”€â”€UDS: Read DIDâ”€â”€â”€â”¤                   â”‚                  â”‚
    â”‚ 0x22 F195 (SW Ver)â”‚                   â”‚                  â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚â”€â”€UDS: SW v1.0.0â”€â”€â–ºâ”‚                   â”‚                  â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚                   â”‚[ì§‘ê³„ ì¤‘...]        â”‚                  â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚                   â”‚â”€â”€Zone 1 VCIâ”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚
    â”‚                   â”‚ {                 â”‚                  â”‚
    â”‚                   â”‚   "zone_id": 1,   â”‚                  â”‚
    â”‚                   â”‚   "ecus": [...]   â”‚                  â”‚
    â”‚                   â”‚ }                 â”‚                  â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚                   â”‚                   â”‚[ì „ì²´ ì°¨ëŸ‰ VCI]    â”‚
    â”‚                   â”‚                   â”‚ = Zone1 + Zone2...â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚                   â”‚                   â”‚â”€â”€Vehicle VCIâ”€â”€â”€â”€â–ºâ”‚
    â”‚                   â”‚                   â”‚ {               â”‚
    â”‚                   â”‚                   â”‚   "vin": "...",  â”‚
    â”‚                   â”‚                   â”‚   "zones": [     â”‚
    â”‚                   â”‚                   â”‚     {zone1},     â”‚
    â”‚                   â”‚                   â”‚     {zone2}      â”‚
    â”‚                   â”‚                   â”‚   ]              â”‚
    â”‚                   â”‚                   â”‚ }                â”‚
```

### 3. OTA ì—…ë°ì´íŠ¸

```
Server              VMG (CCU)         MCU #1 (ZG)        MCU #2 (ECU)
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚â”€â”€OTA Campaignâ”€â”€â”€â”€â–ºâ”‚                   â”‚                  â”‚
    â”‚ Zone 1: v1.1.0    â”‚                   â”‚                  â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚                   â”‚â”€â”€Readiness Reqâ”€â”€â”€â–ºâ”‚                  â”‚
    â”‚                   â”‚ "Zone 1 ì¤€ë¹„?"     â”‚                  â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚                   â”‚                   â”‚â”€â”€Check Readyâ”€â”€â”€â”€â–ºâ”‚
    â”‚                   â”‚                   â”‚ Battery? Park?   â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚                   â”‚                   â”‚â—„â”€â”€Battery 85%â”€â”€â”€â”€â”¤
    â”‚                   â”‚                   â”‚â—„â”€â”€Parkedâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚                   â”‚                   â”‚[ì§‘ê³„]             â”‚
    â”‚                   â”‚â—„â”€â”€Zone Readyâ”€â”€â”€â”€â”€â”€â”¤                  â”‚
    â”‚                   â”‚ "Zone 1: Ready"   â”‚                  â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚â—„â”€â”€Vehicle Readyâ”€â”€â”€â”¤                   â”‚                  â”‚
    â”‚ All zones OK      â”‚                   â”‚                  â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚   [HTTPS Download]â”‚                   â”‚                  â”‚
    â”‚â”€â”€Firmware Fileâ”€â”€â”€â–ºâ”‚                   â”‚                  â”‚
    â”‚ PKG-ENGINE-v1.1.0 â”‚                   â”‚                  â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚                   â”‚â”€â”€UDS: Req DLâ”€â”€â”€â”€â”€â–ºâ”‚                  â”‚
    â”‚                   â”‚ 0x34 (íŒì›¨ì–´ ì‹œì‘) â”‚                  â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚                   â”‚                   â”‚â”€â”€UDS: Req DLâ”€â”€â”€â”€â–ºâ”‚
    â”‚                   â”‚                   â”‚ 0x34             â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚                   â”‚â”€â”€UDS: Transferâ”€â”€â”€â–ºâ”‚                  â”‚
    â”‚                   â”‚ 0x36 [1024 bytes] â”‚â”€â”€UDS: Transferâ”€â”€â–ºâ”‚
    â”‚                   â”‚                   â”‚ 0x36 [data]      â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚                   â”‚                   â”‚â—„â”€â”€Progress 10%â”€â”€â”€â”¤
    â”‚                   â”‚â—„â”€â”€Progress 10%â”€â”€â”€â”€â”¤                  â”‚
    â”‚â—„â”€â”€Progress 10%â”€â”€â”€â”€â”¤                   â”‚                  â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚                   â”‚ ... (ë°˜ë³µ) ...    â”‚                  â”‚
    â”‚                   â”‚                   â”‚                  â”‚
    â”‚                   â”‚                   â”‚â—„â”€â”€Successâ”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                   â”‚                   â”‚ v1.1.0 Active    â”‚
    â”‚                   â”‚â—„â”€â”€Zone Successâ”€â”€â”€â”€â”¤                  â”‚
    â”‚â—„â”€â”€Vehicle Successâ”€â”¤                   â”‚                  â”‚
```

---

## ğŸ’¾ Zone VCI ë°ì´í„° êµ¬ì¡°

### Zone Level (Zonal Gateway â†’ VMG)

```json
{
  "message_type": "ZONE_VCI_REPORT",
  "message_id": "uuid",
  "timestamp": "2025-10-30T15:00:00.000Z",
  "source": {
    "entity": "ZG",
    "identifier": "ZG-001"
  },
  "target": {
    "entity": "VMG",
    "identifier": "VMG-001"
  },
  "payload": {
    "zone_id": 1,
    "zone_name": "Powertrain",
    "zonal_gateway": {
      "zg_id": "ZG-001",
      "logical_address": "0x0201",
      "firmware_version": "2.0.0",
      "ip_address": "192.168.1.10"
    },
    "ecus": [
      {
        "ecu_id": "TC375-SIM-002-Zone1-ECU1",
        "ecu_type": "Engine_Controller",
        "logical_address": "0x0211",
        "firmware_version": "1.0.0",
        "hardware_version": "TC375TP-LiteKit-v2.0",
        "part_number": "39100-K0100",
        "is_online": true,
        "ota_capable": true,
        "delta_update_supported": true,
        "max_package_size_mb": 10
      },
      {
        "ecu_id": "TC375-SIM-003-Zone1-ECU2",
        "ecu_type": "Transmission_Controller",
        "logical_address": "0x0212",
        "firmware_version": "1.0.0",
        "hardware_version": "TC375TP-LiteKit-v2.0",
        "ota_capable": true
      }
    ],
    "zone_statistics": {
      "total_ecus": 2,
      "online_ecus": 2,
      "ota_capable_ecus": 2,
      "total_storage_mb": 512,
      "available_storage_mb": 256,
      "average_battery_level": 85
    }
  }
}
```

### Vehicle Level (VMG â†’ Server)

```json
{
  "message_type": "VCI_REPORT",
  "payload": {
    "vin": "KMHGH4JH1NU123456",
    "vehicle_info": {
      "model": "Genesis G80 EV",
      "year": 2025
    },
    "zones": [
      {
        "zone_id": 1,
        "zone_name": "Powertrain",
        "zg_id": "ZG-001",
        "ecus": [...]
      },
      {
        "zone_id": 2,
        "zone_name": "Chassis",
        "zg_id": "ZG-002",
        "ecus": [...]
      },
      {
        "zone_id": 3,
        "zone_name": "Body",
        "zg_id": "ZG-003",
        "ecus": [...]
      }
    ],
    "vehicle_statistics": {
      "total_zones": 3,
      "total_ecus": 15,
      "online_ecus": 14,
      "total_storage_mb": 2048,
      "available_storage_mb": 1024
    }
  }
}
```

---

## ğŸ› ï¸ êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Zonal Gateway (MCU #1)

#### Server ê¸°ëŠ¥ (Zone ë‚´ë¶€)
- [ ] DoIP Server TCP ì†Œì¼“ (í¬íŠ¸ 13400)
- [ ] DoIP Server UDP ì†Œì¼“ (í¬íŠ¸ 13400)
- [ ] JSON Server ì†Œì¼“ (í¬íŠ¸ 8765)
- [ ] Vehicle Discovery ì²˜ë¦¬ (UDP Broadcast ì‘ë‹µ)
- [ ] Zone ECU ì—°ê²° ê´€ë¦¬
- [ ] Zone ECU ì •ë³´ ìˆ˜ì§‘
- [ ] UDS ìš”ì²­ ì²˜ë¦¬ (ì§„ë‹¨ ì„œë¹„ìŠ¤)

#### Client ê¸°ëŠ¥ (VMG ì—°ê²°)
- [ ] DoIP Client êµ¬í˜„
- [ ] VMG ì—°ê²° ë° Routing Activation
- [ ] Zone VCI ì§‘ê³„
- [ ] Zone VCI ì „ì†¡ (VMGë¡œ)
- [ ] Heartbeat ì „ì†¡
- [ ] Zone Status ì „ì†¡
- [ ] OTA ì¤€ë¹„ ìƒíƒœ í™•ì¸
- [ ] OTA ì§„í–‰ë¥  ë³´ê³ 

#### ë°ì´í„° ê´€ë¦¬
- [ ] Zone ECU ëª©ë¡ ê´€ë¦¬
- [ ] ECU ìƒíƒœ ì¶”ì  (online/offline)
- [ ] VCI ë°ì´í„° ìºì‹±
- [ ] Zone í†µê³„ ê³„ì‚°

### VMG (CCU)

#### Zone í†µí•© ê´€ë¦¬
- [ ] ì—¬ëŸ¬ Zonal Gateway ë™ì‹œ ì—°ê²°
- [ ] Zoneë³„ VCI ìˆ˜ì§‘
- [ ] ì „ì²´ ì°¨ëŸ‰ VCI í†µí•©
- [ ] Zoneë³„ OTA ì¡°ìœ¨
- [ ] Zone ìƒíƒœ ëª¨ë‹ˆí„°ë§

#### Server í†µì‹ 
- [ ] Vehicle VCI ì „ì†¡ (MQTT)
- [ ] OTA íŒŒì¼ ë‹¤ìš´ë¡œë“œ (HTTPS)
- [ ] ê° Zoneìœ¼ë¡œ OTA ë¶„ë°°
- [ ] ì „ì²´ ì§„í–‰ë¥  ì§‘ê³„

---

## ğŸ“š ì°¸ê³  íŒŒì¼

- `tc375_bootloader/common/zonal_gateway.h` - Zonal Gateway í—¤ë”
- `tc375_bootloader/example_zonal_gateway.c` - ì‚¬ìš© ì˜ˆì œ
- `docs/unified_message_format.md` - í†µí•© ë©”ì‹œì§€ í¬ë§·
- `docs/ISO_13400_specification.md` - DoIP í‘œì¤€

---

**ë²„ì „:** 1.0  
**ìµœì¢… ìˆ˜ì •:** 2025-10-30

